version: '3.7'

services:
  defi-blockchain:
    image: defi/defichain:1.6.4
    ports:
      - "19554:19554"
    command: >
      defid
      -printtoconsole
      -rpcallowip=0.0.0.0/0
      -rpcbind=0.0.0.0
      -rpcuser=playground-rpcuser
      -rpcpassword=playground-rpcpassword
      -masternode_operator=mswsMVsyGMj1FzDMbbxw2QW3KvQAv2FKiy
      -regtest=1
      -txnotokens=0
      -logtimemicros
      -txindex=1
      -acindex=1
      -amkheight=0
      -bayfrontheight=1
      -bayfrontgardensheight=2
      -clarkequayheight=3
      -dakotaheight=4
      -dakotacrescentheight=5

  defi-playground:
    image: ghcr.io/defich/playground:0.0.1
    ports:
      - "12000:3000"
    depends_on:
      - defi-blockchain
    environment:
      PLAYGROUND_DEFID_URL: http://playground-rpcuser:playground-rpcpassword@defi-blockchain:19554
  defi-whale:
    image: ghcr.io/defich/whale:0.1.3
    ports:
      - "13000:3000"
    depends_on:
      - defi-blockchain
    environment:
      WHALE_DEFID_URL: http://playground-rpcuser:playground-rpcpassword@defi-blockchain:19554
      WHALE_NETWORK: regtest
      WHALE_DATABASE_PROVIDER: level
